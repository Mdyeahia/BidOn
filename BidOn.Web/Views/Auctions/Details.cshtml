@model BidOn.Web.ViewModels.DetailsAuctionViewModel

<div class="col-lg-12">

    <div class="card mt-4">
        @if (Model.Auction.AuctionPictures != null && Model.Auction.AuctionPictures.Count() > 0)
        {
            var i = 0;
            <div id="carouselExampleIndicators" class="carousel slide my-4" data-ride="carousel">
                <ol class="carousel-indicators">
                    @foreach (var auctionpic in Model.Auction.AuctionPictures)
                    {
                        var active = auctionpic == Model.Auction.AuctionPictures.First() ? "active" : string.Empty;
                        <li data-target="#carouselExampleIndicators" data-slide-to="@i" class="@active"></li>
                        i++;
                    }
                </ol>
                <div class="carousel-inner" role="listbox">

                    @foreach (var auctionpic in Model.Auction.AuctionPictures)
                    {
                        var active = auctionpic == Model.Auction.AuctionPictures.First() ? "active" : string.Empty;
                        <div class="carousel-item @active">
                            <img class="d-block img-fluid" src="~/Content/images/@auctionpic.Picture.Url" style="width:1108px; height:500px;">
                        </div>

                    }
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        }
        <div class="card-body">
            <h3 class="card-title">@Model.Auction.Title</h3>
            <h4>@Model.BidsAmount
            @if (Model.LatestBidder != null)
            {
                <span class="badge badge-pill p-1">[@Model.LatestBidder.UserName]</span>
            }
            </h4>
            <p class="card-text">@Model.Auction.Description</p>
            <span class="text-warning">★ ★ ★ ★ ☆</span>
            4.0 stars
        </div>
        <div class="card-footer text-muted">
            <button type="button" class="btn btn-success" id="bidBtn">Bid Now</button>
        </div>
    </div>
    <!-- /.card -->

    <div class="card card-outline-secondary my-4">
        <div class="card-header">
            Product Reviews
        </div>
        <div class="card-body">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Omnis et enim aperiam inventore, similique necessitatibus neque non! Doloribus, modi sapiente laboriosam aperiam fugiat laborum. Sequi mollitia, necessitatibus quae sint natus.</p>
            <small class="text-muted">Posted by Anonymous on 3/1/17</small>
            <hr>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Omnis et enim aperiam inventore, similique necessitatibus neque non! Doloribus, modi sapiente laboriosam aperiam fugiat laborum. Sequi mollitia, necessitatibus quae sint natus.</p>
            <small class="text-muted">Posted by Anonymous on 3/1/17</small>
            <hr>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Omnis et enim aperiam inventore, similique necessitatibus neque non! Doloribus, modi sapiente laboriosam aperiam fugiat laborum. Sequi mollitia, necessitatibus quae sint natus.</p>
            <small class="text-muted">Posted by Anonymous on 3/1/17</small>
            <hr>
            <a href="#" class="btn btn-success">Leave a Review</a>
        </div>
    </div>
    <!-- /.card -->

</div>

<script>
    $("#bidBtn").click(function () {
        $.ajax({
            url: "@Url.Action("Bid","Bids")",
            type: 'Post',
            data: {
                AuctionId: '@Model.Auction.Id'
            }
        })
        .done(function (response) {
           
            if (response.success) {
                window.location.reload();
            } else {
                swal("Oops!", response.message, "error");
            }
        })
        .fail(function () {
            swal("Oops!", "Something went wrong, please try again later.", "error");
        })
    })

</script>